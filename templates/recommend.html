{% set page = "recommend" %}
{% extends "layout.html" %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100">
  <main class="max-w-4xl mx-auto px-6 py-8 pb-32">

    {% if status == "need_login" %}
    <div class="bg-white/90 p-6 rounded-2xl shadow-xl text-center">
      <h2 class="text-2xl font-bold text-slate-800 mb-4">로그인이 필요한 서비스입니다.</h2>
      <a href="/login">
        <button class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700">
          로그인 하러 가기
        </button>
      </a>
    </div>

    {% elif status == "need_preference" %}
    <div class="bg-white/90 p-6 rounded-2xl shadow-xl text-center">
      <h2 class="text-2xl font-bold text-slate-800 mb-4">선호도 조사가 필요한 서비스입니다.</h2>
      <a href="/preference">
        <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
          선호도 조사하러 가기
        </button>
      </a>
    </div>

    {% else %}
    <h2 class="text-3xl font-bold text-slate-800 mb-2">당신을 위한 추천</h2>
    <p class="text-slate-600 mb-4">AI가 분석한 당신의 음악 취향을 바탕으로 곡을 추천합니다</p>

    <button id="refresh-btn" class="px-4 py-2 bg-indigo-600 text-white text-sm rounded-lg shadow hover:bg-indigo-700">
      새로고침
    </button>
    <a href="/preference"><button id="preference-btn"
        class="px-4 py-2 bg-indigo-600 text-white text-sm rounded-lg shadow hover:bg-indigo-700">
        내 취향 바꾸러 가기
      </button>
    </a>

    <div id="loading-message" class="hidden flex flex-col items-center justify-center p-10 text-center">
      <svg class="animate-spin h-10 w-10 text-indigo-600 mb-4" xmlns="http://www.w3.org/2000/svg" fill="none"
        viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor"
          d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
        </path>
      </svg>
      <p id="loading-text" class="text-lg font-semibold text-slate-700"></p>
    </div>

    <div id="tracks-container" class="space-y-4 mt-6"></div>

    <div id="surprise-container" class="mt-8"></div>
    {% endif %}

  </main>
</div>
{% endblock %}